<!-- 导航栏 -->
<navigation-bar title="积分记录" showBack="true" />

<!-- 主容器 -->
<scroll-view class="credit-record-container {{ios ? 'ios' : 'android'}}" scroll-y enhanced enable-back-to-top bindscrolltolower="loadMore" lower-threshold="10">
  <!-- 列表为空时显示 -->
  <view wx:if="{{records.length === 0}}" class="empty-state">
    <view class="empty-icon">
      <image src="/images/credit/empty.svg" mode="aspectFit" />
    </view>
    <text class="empty-title">暂无积分记录</text>
    <text class="empty-desc">去参与钓鱼活动获取积分吧</text>
  </view>
  
  <!-- 积分记录列表 -->
  <view class="records-wrapper" wx:else>
    <!-- 月份分组 -->
    <view wx:for="{{groupedRecords}}" wx:for-item="monthGroup" wx:key="month" class="month-group">
      <!-- 月份标题 -->
      <view class="month-title">
        <text class="month-text">{{monthGroup.month}}</text>
        <text class="month-points-total">本月总积分：{{monthGroup.totalPoints}}</text>
      </view>
      
      <!-- 记录列表 -->
      <view class="month-records">
        <view wx:for="{{monthGroup.records}}" wx:for-item="record" wx:key="id" class="record-item">
          <!-- 左侧图标和信息 -->
          <view class="record-left">
            <view class="record-icon {{record.point >= 0 ? 'icon-positive' : 'icon-negative'}}">
              <image src="{{record.point >= 0 ? '/images/credit/plus.svg' : '/images/credit/minus.svg'}}" mode="aspectFit" />
            </view>
            <view class="record-info">
              <text class="record-desc">{{record.reason}}</text>
              <text class="record-date">{{record.createdDate}}</text>
            </view>
          </view>
          
          <!-- 右侧积分 -->
          <text class="record-points {{record.point >= 0 ? 'points-positive' : 'points-negative'}}">
            {{record.point >= 0 ? '+' : ''}}{{record.point}}
          </text>
        </view>
        <view class="no-more"><text>没有更多数据.</text></view>
      </view>
    </view>
  </view>
  
  <!-- 加载提示 -->
  <view class="loading-more" wx:if="{{isLoading}}">
    <text>加载中...</text>
  </view>
</scroll-view>