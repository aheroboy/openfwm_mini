<navigation-bar title="æ¸”è·è¯¦æƒ…" back="{{!shared}}" color="white" background="#07C160"></navigation-bar>
<scroll-view scroll-y class="harvest-container {{ios?'ios':'android'}}" lower-threshold="20">

    <!-- æ¸”è·å›¾ç‰‡è½®æ’­ -->
    <view class="image-swiper-container" wx:if="{{fishingRecord.jsonHisPictures && fishingRecord.jsonHisPictures.length > 0}}">
        <swiper class="image-swiper" indicator-dots="true" autoplay="false" circular="true" indicator-color="rgba(255,255,255,0.3)" indicator-active-color="#07C160" bindchange="onSwiperChange">
            <block wx:for="{{fishingRecord.jsonHisPictures}}" wx:key="index">
                <swiper-item>
                    <image class="harvest-image" src="{{item}}" mode="aspectFill" bindtap="previewImage"></image>
                </swiper-item>
            </block>
        </swiper>
        <view class="image-counter" wx:if="{{fishingRecord.jsonHisPictures.length > 1}}">
            <text class="counter-text">{{currentIndex || 1}}/{{fishingRecord.jsonHisPictures.length}}</text>
        </view>
    </view>

    <!-- æ¸”è·è¯¦æƒ…å¡ç‰‡ -->
    <view class="details-card">
        <view class="card-header">
            <text class="card-title">æ¸”è·è¯¦æƒ…</text>
            <text class="fishing-time-header">å‚é’“æ—¶é—´: {{fishingRecord.fishingAt}}</text>
        </view>

        <view class="detail-row">
            <view class="detail-label">
                <text class="label-icon">ğŸŸ</text>
                <text class="label-text">é±¼ç§</text>
            </view>
            <text class="detail-value">{{fishingRecord.fishesStr}}</text>
        </view>

        <view class="detail-row">
            <view class="detail-label">
                <text class="label-icon">ğŸ†</text>
                <text class="label-text">æ”¶è·æƒ…å†µ</text>
            </view>
            <text class="detail-value">{{fishingRecord.harvestTypeVal.name}}</text>
        </view>

        <view class="detail-row">
            <view class="detail-label">
                <text class="label-icon">â­</text>
                <text class="label-text">è¯„åˆ†</text>
            </view>
            <view class="rating-container">
                <view class="stars">
                    <text wx:for="{{[1,2,3,4,5]}}" wx:key="index" class="star {{index < fishingRecord.score ? 'active' : ''}}">â˜…</text>
                </view>
                <text class="score-text">{{fishingRecord.scoreVal.name}}</text>
            </view>
        </view>

        <view class="detail-row">
            <view class="detail-label">
                <text class="label-icon">ğŸ“</text>
                <text class="label-text">æ¨è</text>
            </view>
            <text class="detail-value">{{fishingRecord.isRec ? 'æ˜¯' : 'å¦'}}</text>
        </view>
    </view>


    <!-- æè¿°ä¿¡æ¯åŒºåŸŸ -->
    <view class="description-section">
        <view class="section-header">
            <text class="section-title">æè¿°ä¿¡æ¯</text>
        </view>

        <view class="description-content">
            <text class="description-text">{{fishingRecord.comment || 'æš‚æ— æè¿°ä¿¡æ¯'}}</text>
        </view>
    </view>
</scroll-view>
<view class="right-float-menu">
    <view data-tooltip="é¦–é¡µ">
        <image src="/images/tabbar/home_active.png" bind:tap="onHomeClicked"></image>
    </view>
    <button open-type="share">
        <image class="share-image" src="/images/share.png" mode="aspectFit"></image>
    </button>
    <view data-tooltip="æ”¶è—é’“ç‚¹">
        <image src="/images/go.png" bind:tap="goToSpotDetail"></image>
    </view>
</view>